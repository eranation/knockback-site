<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><title>Knockback.js Docs</title><link rel="stylesheet" href="vendor/stylesheets/bootstrap.min.css"><link rel="stylesheet" href="stylesheets/layout.css"><link rel="stylesheet" href="stylesheets/layout_components.css"><script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script><link rel="stylesheet" href="stylesheets/docs.css"><link rel="stylesheet" href="vendor/lib/highlight/highlightjs/stylesheets/dark.css"><script type="application/javascript" src="vendor/lib/highlight/highlightjs/highlight.js"></script><script type="application/javascript" src="vendor/lib/highlight/highlightjs/languages/javascript.js"></script><script type="application/javascript" src="vendor/lib/highlight/highlight-coffee.js"></script><script type="application/javascript" src="vendor/javascripts/bootstrap-dropdown.js"></script><script type="application/javascript" src="javascripts/interface.js"></script><script type="application/javascript">hljs.tabReplace = '  ';
hljs.initHighlightingOnLoad();</script></head><body><div id="wrap"><div class="page navbar"><div class="navbar page"><div class="navbar-inner"><div class="container"><a class="brand">Knockback.js</a><ul class="nav"><li><a href="index.html">Home</a></li><li><a href="tutorial_getting_started.html">Getting Started</a></li><li class="active"><a href="docs.html">Docs</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Tutorials<b class="caret"></b></a><ul class="dropdown-menu"><li></li><a href="tutorial_getting_started.html">Getting Started</a><a href="tutorial_todos.html">Todos</a><a href="tutorial_inspector.html">Inspector</a></ul></li><li><a href="release_notes.html">Release Notes</a></li></ul><div id="script_language"><div class="separator"><div class="selection codestyle"><div class="option"><input id="cs-cs" type="radio" name="codestyle" value="cs" class="auto"><label for="cs-cs">CoffeeScript</label></div><div class="option"><input id="cs-js" type="radio" name="codestyle" value="js"><label for="cs-js">Javascript</label></div></div></div></div></div></div></div></div></div><div id="wrap"><div class="page container"><header class="page"></header><content class="page"><div class="api container"><h1>Knockback.js API and Usage Examples</h1><div class="container-fluid"><div class="row-fluid"><div class="span4 api index"><div class="content"><ul><!--////////////////////////////////--><!-- kb.ViewModel--><!--////////////////////////////////--><li class="type"><a href="#view_model">kb.ViewModel</a><li>- <a href="#view_model_extend">extend</a></li><li>- <a href="#view_model_create">constructor or kb.viewModel</a></li><li>- <a href="#view_model_model">model</a></li></li><!--////////////////////////////////--><!-- kb.Observable--><!--////////////////////////////////--><li class="type"><a href="#observable">kb.Observable</a><li>- <a href="#observable_create">constructor or kb.observable</a></li><li>- <a href="#observable_destroy">destroy</a></li><li>- <a href="#observable_set_to_default">setToDefault</a></li></li><!--////////////////////////////////--><!-- kb.Observables--><!--////////////////////////////////--><li class="type"><a href="#observables">kb.Observables</a><li>- <a href="#observables_create">constructor or kb.observables</a></li><li>- <a href="#observable_destroy">destroy</a></li><li>- <a href="#observable_set_to_default">setToDefault</a></li></li><!--////////////////////////////////--><!-- kb.CollectionObservable--><!--////////////////////////////////--><li class="type"><a href="#collection_observable">kb.CollectionObservable</a><li>- <a href="#collection_observable_create">constructor or kb.collectionObservable</a></li><li>- <a href="#collection_observable_collection">collection</a></li><li>- <a href="#collection_observable_sorted_index">sortedIndex</a></li><li>- <a href="#collection_observable_sort_attribute">sortAttribute</a></li><li>- <a href="#collection_observable_has_view_models">hasViewModels</a></li></li><!--////////////////////////////////--><!-- kb.utils--><!--////////////////////////////////--><li class="type"><a href="#utils">kb.utils</a><li>- <a href="#utils_release">release</a></li><li>- <a href="#utils_wrapped_model">wrappedModel</a></li><li>- <a href="#utils_set_to_default">setToDefault</a></li><li>- <a href="#utils_observable_instance_of">observableInstanceOf</a></li><li>- <a href="#utils_wrapped_observable">wrappedObservable</a></li><!--li='- '--><!--  a(href='#utils_options_create_clear') optionsCreateClear--><!--li='- '--><!--  a(href='#utils_options_create_override') optionsCreateOverride--></li><!--////////////////////////////////--><!-- kb.LocalizedObservable--><!--////////////////////////////////--><li class="type"><a href="#localized_observable">kb.LocalizedObservable</a><li>- <a href="#localized_observable_extend">extend</a></li><li>- <a href="#localized_observable_constructor">constructor</a></li><li>- <a href="#localized_observable_destroy">destroy</a></li><li>- <a href="#localized_observable_set_to_default">setToDefault</a></li><li>- <a href="#localized_observable_reset_to_current">resetToCurrent</a></li><li>- <a href="#localized_observable_observed_value">observedValue</a></li></li><!--////////////////////////////////--><!-- kb.FormattedObservable--><!--////////////////////////////////--><li class="type"><a href="#formatted_observable">kb.FormattedObservable</a><li>- <a href="#formatted_observable_create">constructor or kb.formattedObservable</a></li><li>- <a href="#formatted_observable_destroy">destroy</a></li></li><!--////////////////////////////////--><!-- kb.DefaultWrapper--><!--////////////////////////////////--><li class="type"><a href="#default_wrapper">kb.DefaultWrapper</a><li>- <a href="#default_wrapper_create">constructor or kb.defaultWrapper</a></li><li>- <a href="#default_wrapper_destroy">destroy</a></li></li><!--////////////////////////////////--><!-- kb.TriggeredObservable--><!--////////////////////////////////--><li class="type"><a href="#triggered_observable">kb.TriggeredObservable</a><li>- <a href="#triggered_observable_create">constructor or kb.triggeredObservable</a></li><li>- <a href="#triggered_observable_destroy">destroy</a></li></li><!--////////////////////////////////--><!-- kb.RefCountable--><!--////////////////////////////////--><li class="type"><a href="#ref_countable">kb.RefCountable</a><li>- <a href="#ref_countable_extend">extend</a></li><li>- <a href="#ref_countable_constructor">constructor</a></li><li>- <a href="#ref_countable_retain">retain</a></li><li>- <a href="#ref_countable_ref_count">refCount</a></li><li>- <a href="#ref_countable_release">release</a></li><li>- <a href="#ref_countable___destroy">__destroy</a></li></li><!--////////////////////////////////--><!-- kb.Store--><!--////////////////////////////////--><!--li.type--><!--  a(href='#store') kb.Store--><!--  li='- '--><!--    a(href='#store_constructor') constructor--><!--  li='- '--><!--    a(href='#store_destroy') destroy--><!--  li='- '--><!--    a(href='#store_register_value') registerValue--><!--  li='- '--><!--    a(href='#store_resolve_value') resolveValue--><!--  li='- '--><!--    a(href='#store_release_value') releaseValue--><!--  li='- '--><!--    a(href='#store_add_resolver_to_options') addResolverToOptions--><!--  li='- '--><!--    a(href='#store_resolve_from_options') resolveFromOptions--></ul></div></div><div class="span8 api descriptions"><div class="content"><!--////////////////////////////////--><!-- kb.ViewModel--><!--////////////////////////////////--><h2 id="view_model">kb.ViewModel</h2><div>Used to generate observables automatically for a model's attributes</div><h4>Super class:<a href="#ref_countable"> kb.RefCountable</a></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee">view_model = kb.viewModel(new Backbone.Model({first_name: "Planet", last_name: "Earth"}))

# Do something then clean up
# kb.utils.release(view_model); view_model = null
</code></pre><pre data-for="js"><code class="javascript">var view_model = kb.viewModel(new Backbone.Model({first_name: "Planet", last_name: "Earth"}));

// Do something then clean up
// kb.utils.release(view_model); view_model = null;
</code></pre><h3 id="view_model_extend">kb.ViewModel::extend(properties, [classProperties]) <span class="label label-success">class</span></h3><div>Used to derive a class in JavaScript (when CoffeeScript is not used)</div><h4>Example:</h4><pre data-for="js"><code class="javascript">var ViewModel = kb.ViewModel.extend({
  constructor: function(model){
    kb.ViewModel.prototype.constructor.apply(this, arguments);
    this.full_name = ko.computed(function() { return this.first_name() + " " + this.last_name(); }, this);
  }
});
var view_model = new ViewModel(model);
</code></pre><h3 id="view_model_create">constructor(model, [options]) or kb.viewModel<span class="label label-info">factory</span></h3><div>Used to derive a class in JavaScript (when CoffeeScript is not used)</div><h4>Parameters<ol><li><strong>model: </strong><span class="type">{ Backbone.Model }: </span><span>the model whose attributes will be synchronized</span></li><li><strong>options: </strong><span class="label label-inverse">optional</span><ul><li>internals <span class="type">{ [strings] }: </span></li><li>requires <span class="type">{ [strings] }: </span></li><li>children <span class="type">{ function(model, key, options) | {key: function(model, key, options)} }: </span></li><li>create <span class="type">{ function(model, key, options) }: </span></li><li>read_only <span class="type">{ boolean }: </span></li></ul></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee"># instance
view_model1 = new kb.ViewModel(model)

# factory
view_model2 = kb.viewModel(model)</code></pre><pre data-for="js"><code class="javascript">// instance
var view_model1 = new kb.ViewModel(model);

// factory
var view_model2 = kb.viewModel(model);
</code></pre><h3 id="view_model_model">model([model]) <span class="label label-important">dual purpose</span></h3><div>Used to get/set the model</div><h4>Parameters<ol><li><strong>model: </strong><span class="type">{ Backbone.Model }: </span><span class="label label-inverse">optional</span><span> the model to set on the view model </span></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee">view_model = kb.viewModel(new Backbone.Model({name: 'bob'}))

# get
the_model = view_model.model()

# set
view_model.model(new Backbone.Model({name: 'fred'}))
</code></pre><pre data-for="js"><code class="javascript">var view_model = kb.viewModel(new Backbone.Model({name: 'bob'}));

// get
var the_model = view_model.model();

// set
view_model.model(new Backbone.Model({name: 'fred'}));
</code></pre><!--////////////////////////////////--><!-- kb.Observable--><!--////////////////////////////////--><h2 id="observable">kb.Observable</h2><div>Used to generate a single observable for a model's attribute</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">ContactViewModel = (model) ->
  @name = kb.observable(model, 'name')
  @number = kb.observable(model, {key:'number', read_only: true})
  @
  
model = new Contact({name: 'Ringo', number: '555-555-5556'})
view_model = new ContactViewModel(model)
</code></pre><pre data-for="js"><code class="javascript">var ContactViewModel = function(model) {
  this.name = kb.observable(model, 'name');
  this.number = kb.observable(model, { key: 'number', read_only: true });
};
var model = new Contact({
  name: 'Ringo',
  number: '555-555-5556'
});
var view_model = new ContactViewModel(model);
</code></pre><h3 id="observable_create">constructor(model, mapping_info, [owner]) or kb.observable <span class="label label-info">factory</span></h3><div>Used to create a new object</div><h4>Parameters<ol><li><strong>model: </strong><strong>model: </strong><span class="type">{ Backbone.Model }: </span><span>the model whose attributes will be synchronized </span></li><li><strong>mapping_info: </strong><span class="label label-inverse">optional</span><ul><li>read <span class="type">{ function() }: </span></li><li>write <span class="type">{ function(value) }: </span></li><li>read_only <span class="type">{ boolean }: </span></li></ul></li><li><strong>owner: </strong><span class="label label-inverse">optional</span><span> required if you need the view model as &quot;this&quot; in your read or write methods </span></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee"># instance
name1 = new kb.Observable(model, 'name')

# factory
name2 = kb.observable(model, 'name')</code></pre><pre data-for="js"><code class="javascript">// instance
var name1 = new kb.Observable(model, 'name');

// factory
var name2 = kb.observable(model, 'name');
</code></pre><h3 id="observable_destroy">destroy()</h3><div>Used to release the memory of the object</div><h3 id="observable_set_to_default">setToDefault()</h3><div>Used to return all of the owned observables to their default values (if they exist)</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">model = Backbone.Model({name: 'Bob'})
name = kb.observable(model, {key:'name', default: '(none)'})
# name is Bob

name.setToDefault()
# name is (none)
</code></pre><pre data-for="js"><code class="javascript">var model = Backbone.Model({name: 'Bob'});
var name = kb.observable(model, {key:'name', default: '(none)'});
// name is Bob

name.setToDefault();
// name is (none)
</code></pre><!--////////////////////////////////--><!-- kb.Observables--><!--////////////////////////////////--><h2 id="observables">kb.Observables</h2><div>Used to generate observables manually for a model's attributes</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">ContactViewModel = (model) ->
  @attribute_observables = kb.observables(model, {
    name:     {key: 'name', read_only: true}
    number:   'number'
    date:     {key:'date', localizer: LongDateLocalizer}
    name2:    {key: 'name', read_only: true}
  }, this)
  @
  
model = new Contact({name: 'John', number: '555-555-5558', date: new Date(1940, 10, 9)})
view_model = new ContactViewModel(model)
</code></pre><pre data-for="js"><code class="javascript">var ContactViewModel = function(model) {
  this.attribute_observables = kb.observables(model, {
    name:     {key: 'name', read_only: true}
    number:   'number'
    date:     {key:'date', localizer: LongDateLocalizer}
    name2:    {key: 'name', read_only: true}
  }, this);
};

var model = new Contact({name: 'John', number: '555-555-5558', date: new Date(1940, 10, 9)});
view_model = new ContactViewModel(model);
</code></pre><h3 id="observables_create">constructor(model, mappings_info, [view_model], [options]) or kb.observables <span class="label label-info">factory</span></h3><div>Used to create a new object</div><h4>Parameters<ol><li><strong>model: </strong><span class="type">{ Backbone.Model }: </span><span>the model whose attributes will be synchronized </span></li><li><strong>mappings_info: </strong><span class="type"> { [mapping_info as would be passed to each kb.observable | string for an attribute key] + {key: string}}: </span></li><li><strong>view_model: </strong><span class="label label-inverse">optional</span><span> the view model target to set the properties for each mapped attribute (the kb.Observables instance itself will always have the generated observables set in its properties) </span></li><li><strong>options: </strong><span class="label label-inverse">optional</span><span class="type"> { boolean for read_only | {read_only: boolean} }: </span><span> the view model target to set the properties for each mapped attribute (the kb.Observables instance itself will always have the generated observables set in its properties) </span></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee"># instance
view_model1 = {}
new kb.Observables(model, {name: 'name', date: 'date'}, view_model1)

# factory
view_model2 = {}
new kb.observables(model, {name: 'name', date: 'date'}, view_model1)
</code></pre><pre data-for="js"><code class="javascript">// instance
var view_model1 = {}
new kb.Observables(model, {name: 'name', date: 'date'}, view_model1)

// factory
var view_model2 = {}
new kb.observables(model, {name: 'name', date: 'date'}, view_model1)
</code></pre><h3 id="observables_destroy">destroy()</h3><div>Used to release the memory of the object</div><h3 id="observables_set_to_default">setToDefault()</h3><div>Used to return all of the owned observables to their default values (if they exist)</div><pre data-for="cs"><code class="coffee">ContactViewModel = (model) ->
  @loading_message = ko.observable('(none)')
  @attribute_observables = kb.observables(model, {
    name:     {key:'name', default: @loading_message}
    number:   {key:'number', default: @loading_message}
  }, this)
  @
  
view_model = new ContactViewModel(new Backbone.Model({name: 'Bob'}))
# name is Bob and number is (none)

view_model.setToDefault()
# name and number are (none)

view_model.loading_message('(nada)')
# name and number are (nada)
</code></pre><pre data-for="js"><code class="javascript">var ContactViewModel = function(model){
  this.loading_message = ko.observable('(none)');
  this.attribute_observables = kb.observables(model, {
    name:     {key:'name', default: @loading_message},
    number:   {key:'number', default: @loading_message}
  }, this);
};

var view_model = new ContactViewModel(new Backbone.Model({name: 'Bob'}));
// name is Bob and number is (none)

view_model.attribute_observables.setToDefault()
// name and number are (none)

view_model.loading_message('(nada)')
// name and number are (nada)
</code></pre><!--////////////////////////////////--><!-- kb.CollectionObservable--><!--////////////////////////////////--><h2 id="collection_observable">kb.CollectionObservable</h2><div>Used to generate ViewModels automatically for a collections's models</div><h4>Super class:<a href="#ref_countable"> kb.RefCountable</a></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee">view_model =
  todos: kb.collectionObservable(new Backbone.Collection([{name: 'name1'}, {name: 'name2'}]))
  </code></pre><pre data-for="js"><code class="javascript">var view_model = {
  todos: kb.collectionObservable(new Backbone.Collection([{name: 'name1'}, {name: 'name2'}]))
};
</code></pre><h3 id="collection_observable_create">constructor(collection, [options]) or kb.collectionObservable <span class="label label-info">factory</span></h3><div>Used to create a new object</div><h4>Parameters<ol><li><strong>model: </strong><strong>model: </strong><span class="type">{ Backbone.Collection }: </span><span>the collection to synchronize with model additions, removals, and resorting </span></li><li><strong>options: </strong><span class="label label-inverse">optional</span><ul><li>view_model <span class="type">{ constructor(model, options) }: </span></li><li>view_model_create <span class="type">{ function(model, options) }: </span></li><li>create <span class="type">{ function(model, options) }: </span></li><li>sort_attribute <span class="type">{ string }: </span></li><li>sorted_index <span class="type">{ function(models | view_models, model_to_add | view_model_to_add) }: </span></li><li>defer <span class="type">{ boolean }: </span></li><!--li='store '--><!--  span.type='{ function(model, options) }: '--><!--li='store_skip_resolve '--><!--  span.type='{ boolean }: '--></ul></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee"># instance
todos1 = new kb.CollectionObservable(new Backbone.Collection([{name: 'name1'}, {name: 'name2'}]))

# factory
todos2 = kb.collectionObservable(new Backbone.Collection([{name: 'name1'}, {name: 'name2'}]))</code></pre><pre data-for="js"><code class="javascript">// instance
var todos1 = new kb.CollectionObservable(new Backbone.Collection([{name: 'name1'}, {name: 'name2'}]));

// factory
var todos2 = kb.collectionObservable(new Backbone.Collection([{name: 'name1'}, {name: 'name2'}]));
</code></pre><h3 id="collection_observable_collection">collection([collection], [options]) <span class="label label-important">dual purpose</span></h3><div>Used to get/set the collection</div><h4>Parameters<ol><li><strong>collection </strong><span class="type">{ Backbone.Collection }: </span><span class="label label-inverse">optional</span><span> the collection to synchronize with model additions, removals, and resorting </span></li><li><strong>options: </strong><span class="label label-inverse">optional</span><ul><li>silent <span class="type">{ boolean }: </span></li></ul></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee">todos1 = new kb.CollectionObservable(new Backbone.Collection())

# get
current_collection = todos1.collection()

# set
todos1.collection(new Backbone.Collection([{name: 'name3'}, {name: 'name4'}]))
</code></pre><pre data-for="js"><code class="javascript">var todos1 = new kb.CollectionObservable(new Backbone.Collection();

# get
var current_collection = todos1.collection();

# set
todos1.collection(new Backbone.Collection([{name: 'name3'}, {name: 'name4'}]));
</code></pre><h3 id="collection_observable_sorted_index">sortedIndex(sorted_index, [sort_attribute], [options])</h3><div>Sets the sorted_index function for sorting Models or ViewModels in the collection observable</div><pre data-for="cs"><code class="coffee"># change the sorting function
collection_observable.sortedIndex(
  ((view_models, vm) -> _.sortedIndex(view_models, vm, (test) -> kb.utils.wrappedModel(test).get('name')))
)
</code></pre><pre data-for="js"><code class="javascript">// change the sorting function
collection_observable.sortedIndex(
  function(view_models, vm){
    return _.sortedIndex(view_models, vm, (test) -> kb.utils.wrappedModel(test).get('name'));
  }
);
</code></pre><h3 id="collection_observable_sort_attribute">sortAttribute((sort_attribute, [sorted_index], [silent]))</h3><div>Sets the sort attribute name for the collection observable</div><pre data-for="cs"><code class="coffee">todos1 = new kb.CollectionObservable(new Backbone.Collection([{name: 'Zanadu', name: 'Alex'}]))
# in order of Zanadu then Alex

todos1.sortAttribute('name')
# in order of Alex then Zanadu
</code></pre><pre data-for="js"><code class="javascript">var todos1 = new kb.CollectionObservable(new Backbone.Collection([{name: 'Zanadu', name: 'Alex'}]));
// in order of Zanadu then Alex

todos1.sortAttribute('name');
// in order of Alex then Zanadu
</code></pre><h3 id="collection_observable_has_view_models">hasViewModels()</h3><div>Returns true if the collection observable was initialized with a view model create option (and hence generates view models for each model)</div><pre data-for="cs"><code class="coffee">todos1 = new kb.CollectionObservable(new Backbone.Collection())
todos1.hasViewModels()      # false

todos2 = new kb.CollectionObservable(new Backbone.Collection(), {view_model: kb.ViewModel})
todos2.hasViewModels()      # true
</code></pre><pre data-for="js"><code class="javascript">var todos1 = new kb.CollectionObservable(new Backbone.Collection());
todos1.hasViewModels();     // false

var todos2 = new kb.CollectionObservable(new Backbone.Collection(), {view_model: kb.ViewModel});
todos2.hasViewModels();     // true
</code></pre><!--////////////////////////////////--><!-- kb.utils--><!--////////////////////////////////--><h2 id="utils">kb.utils</h2><div>Library for general-purpose utilities </div><h3 id="utils_release">Knockback.utils.release(obj)</h3><div>Releases any type of view model or observable using the conventions of release(), destroy(), dispose()</div><pre data-for="cs"><code class="coffee">view_model = kb.viewModel(model)
kb.utils.release(view_model); view_model = null

todos = kb.collectionObservable(collection)
kb.utils.release(todos); todos = null
</code></pre><pre data-for="js"><code class="javascript">var view_model = kb.viewModel(model);
kb.utils.release(view_model); view_model = null;

var todos = kb.collectionObservable(collection);
kb.utils.release(todos); todos = null;
</code></pre><h3 id="utils_wrapped_model">Knockback.utils.wrappedModel(view_model {, model})<span class="label label-important">dual purpose</span></h3><div>Used to get/set a Model on a ViewModel. During a get, if the ViewModel has no Model, it returns the ViewModel itself (mainly to simplify collection sorting)</div><h4>Parameters<ol><li><strong>view_model </strong><span class="type">{ object | kb.ViewModel }: </span><span> the ViewModel that owns the Model </span></li><li><strong>model: </strong><span class="type">{ object | kb.ViewModel }: </span><span class="label label-inverse">optional</span><span> the Model to set </span></li></ol></h4><pre data-for="cs"><code class="coffee">view_model = kb.viewModel(model)

same_model = kb.utils.wrappedModel(view_model)
</code></pre><pre data-for="js"><code class="javascript">var view_model = kb.viewModel(model);

var same_model = kb.utils.wrappedModel(view_model);
</code></pre><h3 id="utils_set_to_default">Knockback.utils.setToDefault(obj)</h3><div>Used to return all of the nested observables to their default values (if they exist)</div><h4>Parameters<ol><li><strong>obj </strong><span class="type">{ object | Knockback observable with setToDefault() }: </span><span> the target for reset </span></li></ol></h4><pre data-for="cs"><code class="coffee">model = new Backbone.Model({name: 'Bob'})
view_model =
  wrapped_name: kb.defaultWrapper(kb.observable(model, 'name'), "(no name)")
# view_model.wrapped name: Bob

kb.utils.setToDefault(view_model)
# view_model.wrapped name: (no name)
</code></pre><pre data-for="js"><code class="javascript">var model = new Backbone.Model({name: 'Bob'});
var view_model = {
  wrapped_name: kb.defaultWrapper(kb.observable(model, 'name'), "(no name)")
};
// view_model.wrapped name: Bob

kb.utils.setToDefault(view_model);
// view_model.wrapped name: (no name)
</code></pre><h3 id="utils_observable_instance_of">kb.utils.observableInstanceOf(observable, class)</h3><div>Checks the class type of the underlying class on a Knockback observable</div><p><strong>Please note:</strong><span> classes start with a capital letter (eg. kb.CollectionObservable) whereas factory methods start with a lower case letter (eg. kb.collectionObservable)</span></p><pre data-for="cs"><code class="coffee">todos = new kb.CollectionObservable(new Backbone.Collection([{name: 'name1'}, {name: 'name2'}]))

kb.utils.observableInstanceOf(todos, kb.CollectionObservable) # true
kb.utils.observableInstanceOf(todos, kb.collectionObservable) # false (factory function not class!)
</code></pre><pre data-for="js"><code class="javascript">var todos = new kb.CollectionObservable(new Backbone.Collection([{name: 'name1'}, {name: 'name2'}]))'

kb.utils.observableInstanceOf(todos, kb.CollectionObservable); // true
kb.utils.observableInstanceOf(todos, kb.collectionObservable); // false (factory function not class!)
</code></pre><h3 id="utils_wrapped_observable">wrappedObservable(instance {, observable})</h3><div>Used to get/set a observable an owning instance. Mainly used as a helper so you can return a ko.observable function instead of an instance when creating a new Knockback or Knockback-derived instance.</div><h4>Parameters<ol><li><strong>instance </strong><span class="type">{ any Knockout observable being used by Knockback }: </span></li><li><strong>observable: </strong><span class="type">{ a Knockback or Knockout-derived class }: </span><span class="label label-inverse">optional</span></li></ol></h4><pre data-for="cs"><code class="coffee">class ShortDateLocalizer extends kb.LocalizedObservable
  constructor: (value, options, view_model) ->
    super; return kb.utils.wrappedObservable(this)
    </code></pre><pre data-for="js"><code class="javascript">var ShortDateLocalizer = kb.LocalizedObservable.extend({
  constructor: function(value, options, view_model) {
    kb.LocalizedObservable.prototype.constructor.apply(this, arguments);
    return kb.utils.wrappedObservable(this);
  }
});
</code></pre><!--h3#utils_options_create_clear='optionsCreateClear(options)'--><!--div="TODO"--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--><!--h3#utils_options_create_override='optionsCreateOverride(options, create_options)'--><!--div="TODO"--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--><!--////////////////////////////////--><!-- kb.LocalizedObservable--><!--////////////////////////////////--><h2 id="localized_observable">kb.LocalizedObservable</h2><div>Used to generate an observable that automatically changes when the kb.LocaleManager's locale changes</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">class ShortDateLocalizer extends kb.LocalizedObservable
  constructor: (value, options, view_model) ->
    super; return kb.utils.wrappedObservable(this)
    
  read: (value) -> # return something
  write: (localized_string, value) -> # do something
  
ViewModel = (model) ->
  @localized_date = kb.observable(model, {
    key: 'date',
    "default": this.loading_message,
    localizer: ShortDateLocalizer
  }, @)
  @
view_model = new ViewModel(new Backbone.Model({date: new Date()}))
</code></pre><pre data-for="js"><code class="javascript">var ShortDateLocalizer = kb.LocalizedObservable.extend({
  constructor: function(value, options, view_model) {
    kb.LocalizedObservable.prototype.constructor.apply(this, arguments);
    return kb.utils.wrappedObservable(this);
  },
  
  read: function(value) { /* return something */ },
  write: function(localized_string, value) { /* do something */ }
});
var ViewModel = function(model) {
  this.localized_date = kb.observable(model, {
    key: 'date',
    "default": this.loading_message,
    localizer: ShortDateLocalizer
  }, this);
};
var view_model = new ViewModel(new Backbone.Model({date: new Date()}));
</code></pre><h3 id="localized_observable_extend">kb.LocalizedObservable::extend(properties, [classProperties]) <span class="label label-success">class</span></h3><div>Used to derive a class in JavaScript (when CoffeeScript is not used)</div><h4>Example:</h4><pre data-for="js"><code class="javascript">var ShortDateLocalizer = kb.LocalizedObservable.extend({
  constructor: function(value, options, view_model) {
    kb.LocalizedObservable.prototype.constructor.apply(this, arguments);
    return kb.utils.wrappedObservable(this);
  },
  read: function(value) {
    // return something
  },
  write: function(localized_string, value) {
    // do something
  }
});
</code></pre><h3 id="localized_observable_constructor">constructor([value], [options], [view_model])</h3><div>Used to create a new object. For localized observables, creation is often indirect.</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">ContactViewModelDate = (model) ->
  @date = kb.observable(model, {key:'date', localizer: LongDateLocalizer}, this)
  @
  </code></pre><pre data-for="js"><code class="javascript">var ContactViewModelDate = function(model){
  @date = kb.observable(model, {key:'date', localizer: LongDateLocalizer}, this)
};
</code></pre><h3 id="localized_observable_destroy">destroy()</h3><div>Used to release the memory of the object</div><h3 id="localized_observable_set_to_default">setToDefault()</h3><div>Used to return the observable to its default value (if it exists)</div><h3 id="localized_observable_reset_to_current">resetToCurrent()</h3><div>Used to return the observable to the value of its target (for example returning an input field to the last good state)</div><h3 id="localized_observable_observed_value">observedValue([value]) <span class="label label-important">dual purpose</span></h3><div>Used to get/set the value that the localized observable is changing when the kb.LocaleManager changes</div><h4>Parameters<ol><li><strong>value: </strong><span class="type">{ a Knockback or Knockout-derived class }: </span><span class="label label-inverse">optional</span><span> the target that the localized observable synchronizes with on kb.LocaleManager changes </span></li></ol></h4><!--////////////////////////////////--><!-- kb.FormattedObservable--><!--////////////////////////////////--><h2 id="formatted_observable">kb.FormattedObservable</h2><div>Used to reformat a string when an argument changes. The format string can also be an observable.</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">formatted_name = kb.formattedObservable("{1}...cool!", kb.observable(model, 'name'))
</code></pre><pre data-for="js"><code class="javascript">var formatted_name = kb.formattedObservable("{1}...cool!", kb.observable(model, 'name'));
</code></pre><h3 id="formatted_observable_create">constructor(format, args...) or kb.formattedObservable <span class="label label-info">factory</span></h3><div>Used to create a new object</div><h4>Parameters<ol><li><strong>format: </strong><span> a format string such as &quot;{0} and {1}&quot; where {0} and {1} would be synchronized with the arguments (eg. &quot;Bob and Carol&quot; where {0} is Bob and {1} is Carol)</span></li><li><strong>args: </strong><span> all arguments to be passed to the kb.LocaleManager's get() method</span></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee">name = kb.observable(model, 'name')

# instance
formatted_name1 = new kb.FormattedObservable("{1}...cool!", name)

# factory
formatted_name2 = kb.formattedObservable("{1}...cool!", name)
</code></pre><pre data-for="js"><code class="javascript">var name = kb.observable(model, 'name');

# instance
var formatted_name1 = new kb.FormattedObservable("{1}...cool!", name);

# factory
var formatted_name2 = kb.formattedObservable("{1}...cool!", name);
</code></pre><h3 id="formatted_observable_destroy">destroy()</h3><div>Used to release the memory of the object</div><!--////////////////////////////////--><!-- kb.DefaultWrapper--><!--////////////////////////////////--><h2 id="default_wrapper">kb.DefaultWrapper</h2><div>Used to provide a default value if an observable's value is null or undefined</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">wrapped_name = kb.defaultWrapper(kb.observable(model, 'name'), "(no name)")
</code></pre><pre data-for="js"><code class="javascript">var wrapped_name = kb.defaultWrapper(kb.observable(model, 'name'), "(no name)");
</code></pre><h3 id="default_wrapper_create">constructor(target_observable, default_value_observable) or kb.defaultWrapper <span class="label label-info">factory</span></h3><div>Used to create a new object</div><h4>Parameters<ol><li><strong>target_observable </strong><span class="type">{ any observable }: </span></li><li><strong>default_value_observable </strong><span class="type">{ an observable or constant }: </span></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee">name = kb.observable(model, 'name')

# instance
wrapped_name1 = new kb.FormattedObservable(name, "(no name)")

# factory
wrapped_name2 = kb.formattedObservable(name, "(no name)")
</code></pre><pre data-for="js"><code class="javascript">var name = kb.observable(model, 'name');

# instance
var wrapped_name1 = new kb.FormattedObservable(name, "(no name)");

# factory
var wrapped_name2 = kb.formattedObservable(name, "(no name)");
</code></pre><h3 id="default_wrapper_destroy">destroy()</h3><div>Used to release the memory of the object</div><!--////////////////////////////////--><!-- kb.TriggeredObservable--><!--////////////////////////////////--><h2 id="triggered_observable">kb.TriggeredObservable</h2><div>Used to recalculate a value when model's attribute changes value</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">trigger_count = 0
model = new Backbone.Model()

view_model =
  triggered_observable: kb.triggeredObservable(model, 'change')
view_model.counter = ko.dependentObservable(->
  view_model.triggered_observable() # add a dependency
  return trigger_count++
)

model.set(name: 'bob')      # trigger_count: 1
model.set(name: 'george')   # trigger_count: 2
model.set(last: 'smith')    # trigger_count: 3
</code></pre><pre data-for="js"><code class="javascript">var trigger_count = 0;
var model = new Backbone.Model();

var view_model = {
  triggered_observable: kb.triggeredObservable(model, 'change')
};
view_model.counter = ko.dependentObservable(function() {
  view_model.triggered_observable() // add a dependency
  return trigger_count++
});

model.set(name: 'bob');       # trigger_count: 1
model.set(name: 'george');    # trigger_count: 2
model.set(last: 'smith');     # trigger_count: 3
</code></pre><h3 id="triggered_observable_create">constructor(model, event_name) or kb.triggeredObservable <span class="label label-info">factory</span></h3><div>Used to create a new object</div><h4>Parameters<ol><li><strong>model: </strong><span class="type">{ Backbone.Model }: </span><span>the model to bind to</span></li><li><strong>event_name: </strong><span class="type">{ string }: </span><span>a key to bind to changes on for Backbone.Events</span></li></ol></h4><h4>Example:</h4><pre data-for="cs"><code class="coffee"># instance
triggered_observable1 = new kb.TriggeredObservable(name, 'change')

# factory
triggered_observable2 = kb.triggeredObservable(name, 'change')
</code></pre><pre data-for="js"><code class="javascript"># instance
var triggered_observable1 = new kb.TriggeredObservable(name, 'change');

# factory
var triggered_observable2 = kb.triggeredObservable(name, 'change');
</code></pre><h3 id="triggered_observable_destroy">destroy</h3><div>Used to release the memory of the object</div><!--////////////////////////////////--><!-- kb.RefCountable--><!--////////////////////////////////--><h2 id="ref_countable">kb.RefCountable</h2><div>The base class for all reference-counted classes</div><h4>Example:</h4><pre data-for="cs"><code class="coffee">class MyClass extends kb.RefCountable
  constructor: ->
    super
    # do something
    
  __destroy: ->
    # clean up
    super
    
my_instance = new MyClass()  # ref count: 1

my_instance.retain()    # ref count: 2
my_instance.release()   # ref count: 1

my_instance.release()   # ref count: 0 and __destroy() called
</code></pre><pre data-for="js"><code class="javascript">var MyClass = kb.RefCountable.extend({
  constructor: function(){
    kb.RefCountable.prototype.constructor.apply(this, arguments);
    // do something
  },
  __destroy: function(){
    // clean up
    kb.RefCountable.prototype.__destroy.apply(this, arguments);
  }
});
var my_instance = new MyClass();  // ref count: 1

my_instance.retain();   // ref count: 2
my_instance.release();  // ref count: 1

my_instance.release();  // ref count: 0 and __destroy() called
</code></pre><h3 id="ref_countable_extend">kb.RefCountable::extend(properties, [classProperties]) <span class="label label-success">class</span></h3><div>Used to derive a class in JavaScript (when CoffeeScript is not used)</div><h4>Example:</h4><pre data-for="js"><code class="javascript">var MyClass = kb.RefCountable.extend({
  constructor: function(model){
    kb.RefCountable.prototype.constructor.apply(this, arguments);
    // to something
  }
});
</code></pre><h3 id="ref_countable_constructor">constructor</h3><div>Used to create a new object</div><h3 id="ref_countable_retain">retain()</h3><div>Increases reference count by 1</div><pre data-for="cs"><code class="coffee">my_instance.retain()</code></pre><pre data-for="js"><code class="javascript">my_instance.retain();
</code></pre><h3 id="ref_countable_ref_count">refCount()</h3><div>Returns the current reference count</div><pre data-for="cs"><code class="coffee">my_instance.refCount()</code></pre><pre data-for="js"><code class="javascript">my_instance.refCount();
</code></pre><h3 id="ref_countable_release">release()</h3><div>Decreases reference count by 1 and calls __destroy() when ref_count becomes 0</div><pre data-for="cs"><code class="coffee">my_instance.release()</code></pre><pre data-for="js"><code class="javascript">my_instance.release();
</code></pre><h3 id="ref_countable___destroy">__destroy() <span class="label">abstract</span></h3><div>Called when reference count becomes 0</div><pre data-for="cs"><code class="coffee">my_instance = new MyClass()       # ref count: 1
my_instance.release()             # ref count: 0 and __destroy() called</code></pre><pre data-for="js"><code class="javascript">var my_instance = new MyClass();  // ref count: 1
my_instance.release();            // ref count: 0 and __destroy() called
</code></pre><!--////////////////////////////////--><!-- kb.Store--><!--////////////////////////////////--><!--h2#store='kb.Store'--><!--div="Used to manage the persistence and sharing of ViewModels and observables (mainly to break relationship cycles between models)."--><!--h4='Example:'--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--><!--h3#store_constructor='constructor()'--><!--div="Used to create a new object"--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--><!--h3#store_destroy='destroy()'--><!--div="Used to release the memory of the object"--><!--h3#store_register_value='registerValue(key, value)'--><!--div="TODO"--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--><!--h3#store_resolve_value='resolveValue(key, create_fn, args)'--><!--div="TODO"--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--><!--h3#store_releaseValue='releaseValue(value)'--><!--div="TODO"--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--><!--h3#store_add_resolver_to_options='addResolverToOptions(options, key)'--><!--div="TODO"--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--><!--h3#store_resolve_from_options='kb.Store::resolveFromOptions(options, value) '--><!--  span.label.label-success='class'--><!--div="TODO"--><!--pre(data-for='cs'): code.coffee.--><!--  TODO--><!--pre(data-for='js'): code.javascript.--><!--  TODO--></div></div></div></div></div></content><footer class="page"></footer></div></div></body></html>