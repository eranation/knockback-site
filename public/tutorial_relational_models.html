<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><title>Tutorial: Relational Models</title><link rel="stylesheet" href="vendor/stylesheets/bootstrap.min.css"><link rel="stylesheet" href="stylesheets/layout.css"><link rel="stylesheet" href="stylesheets/layout_components.css"><script type="application/javascript" src="vendor/javascripts/jquery-1.7.2.js"></script><link rel="stylesheet" href="stylesheets/tutorial.css"><script type="application/javascript" src="vendor/javascripts/knockout-2.1.0.debug.js"></script><script type="application/javascript" src="vendor/javascripts/underscore-1.3.1.js"></script><script type="application/javascript" src="vendor/javascripts/backbone-0.9.2.js"></script><script type="application/javascript" src="vendor/javascripts/knockback-0.15.1.js"></script><script type="application/javascript" src="vendor/javascripts/backbone-relational-0.5.0.js"></script><link rel="stylesheet" href="vendor/lib/highlight/highlightjs/stylesheets/dark.css"><script type="application/javascript" src="vendor/lib/highlight/highlightjs/highlight.js"></script><script type="application/javascript" src="vendor/lib/highlight/highlightjs/languages/javascript.js"></script><script type="application/javascript" src="vendor/lib/highlight/highlight-coffee.js"></script><script type="application/javascript" src="vendor/javascripts/bootstrap.js"></script><script type="application/javascript" src="javascripts/interface.js"></script><script type="application/javascript">hljs.tabReplace = '  ';
hljs.initHighlightingOnLoad();</script></head><body><div id="wrap"><div class="page navbar"><div class="navbar page"><div class="navbar-inner"><div class="container"><a class="brand kb">Knockback.js</a><ul class="nav"><li><a href="index.html">Home</a></li><li><a href="tutorial_getting_started.html">Getting Started</a></li><li><a href="docs.html">Docs</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Tutorials<b class="caret"></b></a><ul class="dropdown-menu"><li></li><a href="tutorial_getting_started.html">Getting Started</a><a href="tutorial_kb_view_model.html">kb.ViewModel</a><a href="tutorial_kb_localized_observable.html">kb.LocalizedObservable</a><a href="tutorial_relational_models.html">Relational Models</a><a href="tutorial_locale_manager.html">Custom Locale Manager</a><a href="tutorial_todos_app.html">Todos App</a></ul></li><li><a href="release_notes.html">Release Notes</a></li></ul><div id="script_language"><div class="separator"><div class="selection codestyle"><div class="option"><input id="cs-cs" type="radio" name="codestyle" value="cs" class="auto"/><label for="cs-cs">CoffeeScript</label></div><div class="option"><input id="cs-js" type="radio" name="codestyle" value="js"/><label for="cs-js">Javascript</label></div></div></div></div></div></div></div></div></div><div id="wrap"><div class="page container"><header class="page"></header><content class="page"><section><h1>Tutorial: Relational Models</h1><div><a href="index.html">Knockback.js</a><span> supports nested collections that you set up yourself or that are created by </span><a href="https://github.com/PaulUithol/Backbone-relational/">Backbone-Relational</a></div><p></p><h3>Manual Relations (Collection)</h3><p></p><div class="container-fluid"><div class="row-fluid"><div class="span8"><h4>Views:</h4><pre>&lt;div id='rm_manual'&gt;
  &lt;p&gt;First Person:
    &lt;input data-bind=&quot;value: occupants()[0].name&quot;/&gt;
    &lt;div&gt;(home: &lt;span data-bind=&quot;text: occupants()[0].livesIn().location&quot;&gt;&lt;/span&gt;)&lt;/div&gt;
  &lt;/p&gt;
  &lt;p&gt;Second Person:
    &lt;input data-bind=&quot;value: occupants()[1].name&quot;/&gt;
    &lt;div&gt;(home: &lt;span data-bind=&quot;text: occupants()[1].livesIn().location&quot;&gt;&lt;/span&gt;)&lt;/div&gt;
  &lt;/p&gt;

  &lt;br/&gt;

  &lt;p&gt;Location: &lt;input data-bind=&quot;value: location&quot;/&gt;&lt;/p&gt;
  &lt;p&gt;
    Has these people living there:
    &lt;ul data-bind=&quot;foreach: occupants&quot;&gt;
      &lt;li data-bind=&quot;text: name&quot;&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/p&gt;
&lt;/div&gt;</pre><h4>ViewModel and Bindings:</h4><pre data-for="cs">bob = new Backbone.Model({name: 'Bob'})
fred = new Backbone.Model({name: 'Fred'})

house = new Backbone.Model({
  location: 'In the middle of our street'
  occupants: new Backbone.Collection([bob, fred])
})

bob.set({livesIn: house})
fred.set({livesIn: house})

view_model = kb.viewModel(house)

ko.applyBindings(view_model, $('#rm_manual')[0])</pre><pre data-for="js">// Generated by CoffeeScript 1.3.1
var bob, fred, house, view_model;

bob = new Backbone.Model({
  name: 'Bob'
});

fred = new Backbone.Model({
  name: 'Fred'
});

house = new Backbone.Model({
  location: 'In the middle of our street',
  occupants: new Backbone.Collection([bob, fred])
});

bob.set({
  livesIn: house
});

fred.set({
  livesIn: house
});

view_model = kb.viewModel(house);

ko.applyBindings(view_model, $('#rm_manual')[0]);
</pre></div><div class="span4"><h4>Live Result</h4><div class="demos_result_box"><div id='rm_manual'>
  <p>First Person:
    <input data-bind="value: occupants()[0].name"/>
    <div>(home: <span data-bind="text: occupants()[0].livesIn().location"></span>)</div>
  </p>
  <p>Second Person:
    <input data-bind="value: occupants()[1].name"/>
    <div>(home: <span data-bind="text: occupants()[1].livesIn().location"></span>)</div>
  </p>

  <br/>

  <p>Location: <input data-bind="value: location"/></p>
  <p>
    Has these people living there:
    <ul data-bind="foreach: occupants">
      <li data-bind="text: name"></li>
    </ul>
  </p>
</div><script type="application/javascript" src="tutorials/relational_models/rm_manual_view_model_bindings.js"></script></div></div></div></div><p></p><h3>Backbone-Relational</h3><p></p><p>Let's look at an example from the Backbone-Relational site:</p><div class="container-fluid"><div class="row-fluid"><div class="span8"><h4>Views:</h4><pre>&lt;div id='br_relational_models'&gt;
  &lt;p&gt;First Person:
    &lt;input data-bind=&quot;value: occupants()[0].name&quot;/&gt;
    &lt;div&gt;(home: &lt;span data-bind=&quot;text: occupants()[0].livesIn().location&quot;&gt;&lt;/span&gt;)&lt;/div&gt;
  &lt;/p&gt;
  &lt;p&gt;Second Person:
    &lt;input data-bind=&quot;value: occupants()[1].name&quot;/&gt;
    &lt;div&gt;(home: &lt;span data-bind=&quot;text: occupants()[1].livesIn().location&quot;&gt;&lt;/span&gt;)&lt;/div&gt;
  &lt;/p&gt;

  &lt;br/&gt;

  &lt;p&gt;Location: &lt;input data-bind=&quot;value: location&quot;/&gt;&lt;/p&gt;
  &lt;p&gt;
    Has these people living there:
    &lt;ul data-bind=&quot;foreach: occupants&quot;&gt;
      &lt;li data-bind=&quot;text: name&quot;&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/p&gt;
&lt;/div&gt;</pre><h4>Models:</h4><pre data-for="cs">House = Backbone.RelationalModel.extend({
  relations: [{
    type: Backbone.HasMany
    key: 'occupants'
    relatedModel: 'Person'
    reverseRelation:
      key: 'livesIn'
  }]
})

Person = Backbone.RelationalModel.extend({})</pre><pre data-for="js">// Generated by CoffeeScript 1.3.1
var House, Person;

House = Backbone.RelationalModel.extend({
  relations: [
    {
      type: Backbone.HasMany,
      key: 'occupants',
      relatedModel: 'Person',
      reverseRelation: {
        key: 'livesIn'
      }
    }
  ]
});

Person = Backbone.RelationalModel.extend({});
</pre><h4>ViewModel and Bindings:</h4><pre data-for="cs">bob = new Person({id: 'person-1', name: 'Bob'})
fred = new Person({id: 'person-2', name: 'Fred'})

house = new House({
  location: 'In the middle of our street'
  occupants: ['person-1', 'person-2']
})

view_model = kb.viewModel(house)

ko.applyBindings(view_model, $('#br_relational_models')[0])</pre><pre data-for="js">// Generated by CoffeeScript 1.3.1
var bob, fred, house, view_model;

bob = new Person({
  id: 'person-1',
  name: 'Bob'
});

fred = new Person({
  id: 'person-2',
  name: 'Fred'
});

house = new House({
  location: 'In the middle of our street',
  occupants: ['person-1', 'person-2']
});

view_model = kb.viewModel(house);

ko.applyBindings(view_model, $('#br_relational_models')[0]);
</pre></div><div class="span4"><h4>Live Result</h4><div class="demos_result_box"><div id='br_relational_models'>
  <p>First Person:
    <input data-bind="value: occupants()[0].name"/>
    <div>(home: <span data-bind="text: occupants()[0].livesIn().location"></span>)</div>
  </p>
  <p>Second Person:
    <input data-bind="value: occupants()[1].name"/>
    <div>(home: <span data-bind="text: occupants()[1].livesIn().location"></span>)</div>
  </p>

  <br/>

  <p>Location: <input data-bind="value: location"/></p>
  <p>
    Has these people living there:
    <ul data-bind="foreach: occupants">
      <li data-bind="text: name"></li>
    </ul>
  </p>
</div><script type="application/javascript" src="tutorials/relational_models/br_models.js"></script><script type="application/javascript" src="tutorials/relational_models/br_view_model_bindings.js"></script></div></div></div></div></section></content><footer class="page"></footer></div></div></body></html>